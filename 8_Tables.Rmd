<!-- ====================================================================== -->
<!-- ****************************            ****************************** --> 
<!-- ****************************BEGIN TABLES****************************** --> 
<!-- ****************************             ***************************** --> 
<!-- ======================================================================--> 

\FloatBarrier

<!-- ********************************************************************** --> 
<!-- *********************Commercial landings TABLES*********************** --> 
<!-- ********************************************************************** --> 

```{r, eval=TRUE, echo=FALSE, message=FALSE, warning=FALSE, include=FALSE}
     Comm_removal = read.csv("./txt_files/Catch_stream_w_alts.csv")
      Comm_removal = Comm_removal %>% 
                     select(Year, Calcom, WCGOPalt1, CommSource) %>%
                     add_column(Total = 1, .before = 'CommSource') %>%
                     mutate(Total = Calcom + WCGOPalt1)
                              
     colnames(Comm_removal) = c('Year',
                                'Landings',
                                'Discards',
                                'Total Commercial Removals',
                                'Source')
```


```{r, results='asis'}
   Comm_removal.table = xtable(Comm_removal, 
                    caption = c("Commercial landings and discards (mt) from the commercial 
                                fisheries. Data sources are the California Catch 
                                Reconstruction, CALCOM, and WCGOP GEMM report."))

   align(Comm_removal.table) =c('l','c', 
                            '>{\\centering}p{1in}',
                            '>{\\centering}p{.6in}',
                            '>{\\centering}p{1in}',
                            'l')  
     print(Comm_removal.table,include.rownames=FALSE,      
           caption.placement="top",align=TRUE,tabular.environment="longtable",
            floating=FALSE,  #sanitize.text.function = function(x){x},
           add.to.row = list(pos = list(0),command = 
                        paste("\\hline  \\endfirsthead",  # First caption
                                "\\caption[]{Commercial landings and discards (mt) from the commercial 
                                fisheries. Data sources are the California Catch 
                                Reconstruction, CALCOM, and WCGOP GEMM report.} \\label{tab:CommCatches} \\\\ \\hline", # Addit. captions
                                paste(colnames(Comm_removal)[1], paste("&", colnames(Comm_removal)[2:5], collapse=" ")), # Column names
                                "\\\\ \\hline ",
                                "\\endhead", 
                                "\\hline \\multicolumn{4}{l}{\\textit{Continues next page}} \\ 
                                 \\endfoot
                                 \\endlastfoot",collapse=" ")))
```

\FloatBarrier

<!-- ********************************************************************** --> 
<!-- *****Fishery Length comp tables TABLES******* -->
<!-- ********************************************************************** --> 

```{r, results = 'asis'}
#Read in lengths table, make one for n fish lengthed and one for trips
#Fishery dependent data
lengths_sample = read.csv('C:/GopherBlackYellow2019/txt_files/LengthSampleSize2.csv')
lengths_sample = lengths_sample[,1:11]
#Make the multiheader table
colnames(lengths_sample) = c('Year','Trips','Lengths','Trips','Lengths','Trips','Lengths',
                                 'Trips','Lengths','Trips','Lengths')

a_header <- construct_header(
  # the data.frame or matrix that should be plotted
  lengths_sample,
  # the labels of the groups that we want to insert
  grp_names = c("", "CALCOM", "WCGOP","Rec North","Rec South",
                     "Deb VW"),
  # the number of columns each group spans
  span = c(1, 2, 2, 2, 2, 2),
  # the alignment of each group, can be a single character (lcr) or a vector
  align = "c"
)

caption = "Length composition sample sizes for fishery dependent data. Continuous years begin in 1975. 
           Recreational north samples include Karpov et al., MRFSS, and CRFS data. 
           Recreational south samples include Karpov et al., Collins and Crooke unpub.,
           Ally et al. 1991, MRFSS, and CRFS data."

lengths.table = xtable(lengths_sample,
                    caption = caption,
                    label = 'tab:length_samples_fishery')

align(lengths.table) = c('l', 'l',
                               '>{\\centering}p{0.6in}',
                               '>{\\centering}p{0.6in}',
                               '>{\\centering}p{0.6in}',
                               '>{\\centering}p{0.6in}',
                               '>{\\centering}p{0.6in}',
                               '>{\\centering}p{0.6in}',
                               '>{\\centering}p{0.6in}',
                               '>{\\centering}p{0.6in}',
                               '>{\\centering}p{0.6in}',
                               '>{\\centering}p{0.6in}')

print(lengths.table, add.to.row = a_header, 
      caption.placement = "top", 
      include.rownames = F, hline.after = F, scalebox = .76)
```





\FloatBarrier
\newpage
<!-- ********************************************************************** --> 
<!-- ***********Recreational Landings and discards TABLE******************* --> 
<!-- ********************************************************************** --> 

```{r, eval=TRUE, echo=FALSE, message=FALSE, warning=FALSE, include=FALSE}
      Rec_removal = read.csv("./txt_files/Catch_stream_w_alts.csv")
       Rec_removal =  Rec_removal %>% 
                     select(Year, RecNorthalt1, RecSouthalt1, RecSource) %>%
                     filter(Year>1927) %>%
                     add_column(Total = 1, .before = 'RecSource') %>%
                     mutate(Total = RecNorthalt1 + RecSouthalt1)
                              
     colnames(Rec_removal) = c('Year',
                                'North of Pt. Conception',
                                'South of Pt. Conception',
                                'Total Recreational Removals',
                                'Source')
```


```{r, results='asis'}
   Rec_removal.table = xtable(Rec_removal, 
                    caption = c("Recreational removals (mt) of GBYR. Data sources are the California Catch 
                                Reconstruction (modified for south of Pt. Conception), MRFSS (modified for 1981-1982), and CRFS."))

   align(Rec_removal.table) =c('l','c', 
                            '>{\\centering}p{1.2in}',
                            '>{\\centering}p{1.2in}',
                            '>{\\centering}p{1in}',
                            'l')  
     print(Rec_removal.table,include.rownames=FALSE,      
           caption.placement="top",align=TRUE,tabular.environment="longtable",
            floating=FALSE,  #sanitize.text.function = function(x){x},
           add.to.row = list(pos = list(0),command = 
                        paste("\\hline  \\endfirsthead",  # First caption
                                "\\caption[]{Recreational removals (mt) of GBYR. Data sources are the California Catch 
                                Reconstruction (modified for south of Pt. Conception), 
                              MRFSS (modified for 1981-1982), and CRFS.} \\label{tab:Rec_removal} \\\\ \\hline", # Addit. captions
                                paste(colnames(Rec_removal)[1], paste("&", colnames(Rec_removal)[2:5], collapse=" ")), # Column names
                                "\\\\ \\hline ",
                                "\\endhead", 
                                "\\hline \\multicolumn{4}{l}{\\textit{Continues next page}} \\ 
                                 \\endfoot
                                 \\endlastfoot",collapse=" ")))
```



\newpage
\FloatBarrier


<!-- ********************************************************************** --> 
<!-- *****Survey Length comp tables TABLES******* -->
<!-- ********************************************************************** --> 

```{r, results = 'asis'}
#Read in lengths table, make one for n fish lengthed and one for trips
#Fishery independent data
lengths_sample1 = read.csv('C:/GopherBlackYellow2019/txt_files/LengthSampleSize2.csv')
lengths_sample1 = lengths_sample1 %>%
                  select(Year, CCFRPT:PISCOF) %>%
                  filter(Year>2000)
#Make the multiheader table
colnames(lengths_sample1) = c('Year','Trips','Lengths','Trips','Lengths')

a_header <- construct_header(
  # the data.frame or matrix that should be plotted
  lengths_sample1,
  # the labels of the groups that we want to insert
  grp_names = c("","CCFRP","PISCO"),
  # the number of columns each group spans
  span = c(1, 2, 2),
  # the alignment of each group, can be a single character (lcr) or a vector
  align = "c"
)

caption = "Length composition sample sizes for survey data."

lengths.table = xtable(lengths_sample1,
                    caption = caption,
                    label = 'tab:length_samples_survey')

align(lengths.table) = c('l', 'l',
                               '>{\\centering}p{0.6in}',
                               '>{\\centering}p{0.6in}',
                               '>{\\centering}p{0.6in}',
                               '>{\\centering}p{0.6in}')

print(lengths.table, add.to.row = a_header, 
      caption.placement = "top", 
      include.rownames = F, hline.after = F)
```



\FloatBarrier
<!-- ********************************************************************** -->
<!-- *****Index TABLES with all indices - summary and index values******* -->
<!-- ********************************************************************** -->

<!--Index summary tables-->
```{r, results="asis"}
#read in index summary data
Index_summary = read.csv('./txt_files/Index_summary.csv')


Index_summary.table = xtable(Index_summary,
                            caption = c("Summary of indices used in this                                                   assessment."),
                            label='tab:Index_summary')
      

align(Index_summary.table) = c('l', 'r',
                               '>{\\centering}p{1in}',
                               '>{\\centering}p{2in}',
                               '>{\\centering}p{1in}',
                               '>{\\centering}p{1in}',
                               '>{\\centering}p{1in}',
                               '>{\\centering}p{1.5in}')

print(Index_summary.table, 
              include.rownames=FALSE, 
              caption.placement="top",
              floating.environment = 'sidewaystable', 
              sanitize.text.function = function(x){x}) 
     
```



<!--Table with all index values-->
```{r, results = 'asis'}
#Read in indices table, contains index data for all indices
Indices = read.csv('./txt_files/Indices.csv')

#Make the multiheader table
colnames(Indices) = c('Year',"Obs","se_log","Obs","se_log"
                             ,"Obs","se_log","Obs","se_log"
                             ,"Obs","se_log","Obs","se_log"
                             ,"Obs","se_log")

a_header <- construct_header(
  # the data.frame or matrix that should be plotted
  Indices,
  # the labels of the groups that we want to insert
  grp_names = c("", "Deb WV", "MRFSS N","MRFSS S","Onboard N",
                     "Onboard S","CCFRP","PISCO"),
  # the number of columns each group spans
  span = c(1, 2, 2, 2, 2, 2, 2, 2),
  # the alignment of each group, can be a single character (lcr) or a vector
  align = "c"
)

caption = "Index inpus."

Indices.table = xtable(Indices,
                    caption = caption,
                    label = 'tab:Indices')


print(Indices.table, add.to.row = a_header, 
      caption.placement = "top", 
      include.rownames = F, hline.after = F, scalebox = .84)
```

\FloatBarrier
<!-- ********************************************************************** -->
<!-- *****Fleet 5 index TABLES******* -->
<!-- ********************************************************************** -->

```{r, results="asis"}
#read in index summary data for Fleet 5 - Deb's onboard
Fleet5_Filter = read.xlsx('./txt_files/Fleet5_DebWV_IndexData.xlsx', sheetName='Filter', header = T)
Fleet5_AIC = read.xlsx('./txt_files/Fleet5_DebWV_IndexData.xlsx', sheetName='AIC', header=T)

colnames(Fleet5_Filter) = c('Filter','Drifts','Positive Drifts')

Fleet5_Filter$Drifts = formatC(Fleet5_Filter$Drifts, digits = 0, format='f')
Fleet5_Filter$`Positive Drifts` = formatC(Fleet5_Filter$`Positive Drifts`, digits = 0, format='f')

Fleet5_Filter.table = xtable(Fleet5_Filter,
                       caption = c("Data filtering steps for Deb Wilson-Vandenberg's CPFV onboard observer 
                                        index of abundance"),
                       label = 'tab:Fleet5_Filter')


Fleet5_AIC.table = xtable(Fleet5_AIC,
                            caption = c("Model selection for Deb Wilson-Vandenberg's CPFV onboard observer 
                                        index of abundance. Bold values indicate the model selected."),
                            label='tab:Fleet5_AIC')
      


print(Fleet5_Filter.table, 
              include.rownames=FALSE, 
              caption.placement="top")


print(Fleet5_AIC.table, 
              include.rownames=FALSE, 
              caption.placement="top",
              sanitize.text.function = function(x){x})
     
```


\FloatBarrier
<!-- ********************************************************************** -->
<!-- *****Fleets 6 and 7 index TABLES******* -->
<!-- ********************************************************************** -->
```{r, results="asis"}
#read in index summary data for 2 onboard observer indices
Fleet6_7_Filter = read.xlsx('./txt_files/Fleet6and7_OnboardObserver_IndexData.xlsx', 
                            sheetName='BothFilter', header = T)

Fleet6_AIC = read.xlsx('./txt_files/Fleet6and7_OnboardObserver_IndexData.xlsx', sheetName='NorthAIC', header=T)
Fleet7_AIC = read.xlsx('./txt_files/Fleet6and7_OnboardObserver_IndexData.xlsx', sheetName='SouthAIC', header=T)


colnames(Fleet6_7_Filter) = c('Filter','Drifts','Positive Drifts')
Fleet6_7_Filter$Drifts = formatC(Fleet6_7_Filter$Drifts, digits = 0, format='f')
Fleet6_7_Filter$`Positive Drifts` = formatC(Fleet6_7_Filter$`Positive Drifts`, digits = 0, format='f')
Fleet6_7_Filter[10,] = c(NA,NA,NA)
Fleet6_7_Filter[14,] = c(NA,NA,NA)
Fleet6_7_Filter.table = xtable(Fleet6_7_Filter,
                       caption = c("Data filtering steps for the CRFS CPFV onboard observer 
                                        index of abundance for north and south of Pt. Conception."),
                       label = 'tab:Fleet6_&_Filter')
align(Fleet6_7_Filter.table) = c('l','l','c','c')
print(Fleet6_7_Filter.table, 
              include.rownames=FALSE, 
              caption.placement="top")


Fleet6_AIC.table = xtable(Fleet6_AIC,
                            caption = c("Model selection for the CRFS CPFV onboard observer 
                                        index of abundance for north of Pt. Conception. Bold 
                                        values indicate the model selected."),
                            label='tab:Fleet6_AIC')

print(Fleet6_AIC.table, 
              include.rownames=FALSE, 
              caption.placement="top",
              sanitize.text.function = function(x){x})


Fleet7_AIC.table = xtable(Fleet7_AIC,
                            caption = c("Model selection for the CRFS CPFV onboard observer 
                                        index of abundance for south of Pt. Conception. Bold 
                                        values indicate the model selected."),
                            label='tab:Fleet7_AIC')

print(Fleet7_AIC.table, 
              include.rownames=FALSE, 
              caption.placement="top",
              sanitize.text.function = function(x){x})
     
```



